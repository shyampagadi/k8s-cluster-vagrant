# Application Configuration File
# Generated using HCL templatefile function for Resource Lifecycle Demo

[application]
name = ${app_name}
environment = ${environment}
version = 1.0.0
debug = false

[server]
host = 0.0.0.0
port = 80
workers = 4
timeout = 30

[database]
host = ${database_endpoint}
port = 3306
name = webapp
username = admin
# Password will be set by Terraform
ssl = true
pool_size = 10

[monitoring]
enabled = true
retention_days = 30
alert_threshold = 80.0
endpoint = /health

[logging]
level = info
file = /var/log/${app_name}/app.log
max_size = 100MB
max_files = 5

[cache]
enabled = true
type = redis
host = localhost
port = 6379
ttl = 3600

[security]
cors_enabled = true
allowed_origins = ["https://${app_name}.example.com"]
rate_limit = 100
rate_window = 60

[features]
feature_a = true
feature_b = false
feature_c = ${environment == "production" ? "true" : "false"}

[instance]
count = ${instance_count}
type = web
region = us-west-2
availability_zone = auto

[resource_lifecycle]
stage = active
state_management = terraform
dependencies = ["vpc", "subnet", "security_group"]
lifecycle_rules = ["create_before_destroy", "prevent_destroy", "ignore_changes"]

# Environment-specific settings
%{ if environment == "production" }
[production]
ssl_cert = /etc/ssl/certs/${app_name}.crt
ssl_key = /etc/ssl/private/${app_name}.key
backup_enabled = true
backup_schedule = "0 2 * * *"
prevent_destroy = true
%{ endif }

%{ if environment == "development" }
[development]
debug = true
hot_reload = true
mock_external_apis = true
prevent_destroy = false
%{ endif }

%{ if environment == "staging" }
[staging]
ssl_cert = /etc/ssl/certs/${app_name}-staging.crt
ssl_key = /etc/ssl/private/${app_name}-staging.key
backup_enabled = true
backup_schedule = "0 3 * * *"
prevent_destroy = false
%{ endif }
